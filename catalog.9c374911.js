!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var i=a("hM3Qt"),o=a("cgQ4j");const r="https://api.themoviedb.org/3",s=`${r}/trending/movie/day?api_key=${i.KEY}`,c=`${r}/search/movie?api_key=${i.KEY}&query=`;let d=1;const l=10;let v=0;async function p(e){const t=await fetch(e),n=await t.json();v=n.total_results,function(e){const t=document.querySelector(".movies");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");var a;n.classList.add("movie"),n.innerHTML=`\n      <div class="movie__cover-inner ">\n        <img\n          src="https://image.tmdb.org/t/p/w500${e.poster_path}"\n          class="movie__cover"\n          alt="${e.title}"\n        />\n        <div class="movie__cover--darkened"></div>\n      </div>\n      <div class="movie__info">\n        <div class='movie__info_wrapper'>\n        <div class="movie__title">${e.title}</div>\n        <div class="movie__category">${e.genre_ids}</div>\n      <div/>\n        <div class="movie__average movie__average--${a=e.vote_average,a>=7?"green":a>5?"orange":"red"}">${e.vote_average}</div>\n      </div>\n    `,t.appendChild(n)}))}(n.results),function(){document.querySelector(".pagination");const e=Math.ceil(v/l);document.createElement("ul").classList.add("pagination__list");const t=4,n=Math.max(1,d-Math.floor(t/2)),a=Math.min(n+t-1,e);for(let e=n;e<=a;e++){const t=document.createElement("li");t.classList.add("pagination__item"),t.innerText=e,e===d&&t.classList.add("pagination__item--active")}async function o(){try{const e=(await axios.get(`${r}trending/movie/week?api_key=${i.KEY}`)).data.results;for(const t of e)try{const{data:e}=await axios.get(`${r}movie/${t.id}?api_key=${i.KEY}`),n=u({...t,...e});movieList.insertAdjacentHTML("beforeend",n)}catch(e){console.error(e)}}catch(e){console.error(e)}}async function s(e,t=1){e.preventDefault();const n=searchInput.value,a=10;try{const e=await axios.get(`${r}search/movie?api_key=${i.KEY}&query=${n}&page=${t}`),{results:o,total_pages:c}=e.data;if(0===o.length)movieList.innerHTML="<p>OOPS...We are very sorry!We donâ€™t have any results due to your search.</p>",pagination.innerHTML="";else{const e=(t-1)*a,n=e+a,d=o.slice(e,n);movieList.innerHTML="";const l=d.map((async e=>{try{const{data:t}=await axios.get(`${r}movie/${e.id}?api_key=${i.KEY}`),n=u({...e,...t});movieList.insertAdjacentHTML("beforeend",n)}catch(e){console.error(e)}}));await Promise.all(l);const v=m(c,t);pagination.innerHTML=v,pagination.addEventListener("click",(function(e){if("A"===e.target.tagName){s(e,e.target.dataset.page)}})),searchInput.value=""}}catch(e){console.error(e)}}function u(e){return`<li>\n            <img src="https://image.tmdb.org/t/p/w500${e.poster_path}">\n            <h3>${e.title}</h3>\n            <p>${e.overview}</p>\n            <span>${e.vote_average}</span>\n            <span>${e.genres.slice(0,2).map((e=>e.name)).join(", ")}</span>\n          </li>`}function m(e,t){if(e<=1)return"";let n='<div class="pagination">';for(let a=1;a<=e;a++)n+=a===t?`<span>${a}</span>`:`<a href="#" data-page="${a}">${a}</a>`;return n+="</div>",n}document.querySelector(".catalog__search form").addEventListener("submit",s),o();const g=document.querySelector("form"),_=document.querySelector(".catalog__search");g.addEventListener("submit",(e=>{e.preventDefault();const t=_.value;if(t){p(`${c}${t}&api_key=${i.KEY}`),_.value=""}}))}(),d=1}p(s),(0,o.renderModal)()}();
//# sourceMappingURL=catalog.9c374911.js.map
